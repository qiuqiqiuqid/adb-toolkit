<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
  <title>ADB Toolkit - by qiuqiqiuqid</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="logo">
        <span class="logo-icon">📱</span>
        <span class="logo-text">ADB Toolkit</span>
      </div>
      
      <nav class="nav-menu">
        <button class="nav-item active" data-page="devices">
          <span class="nav-icon">📱</span>
          <span class="nav-text">设备管理</span>
        </button>
        <button class="nav-item" data-page="apps">
          <span class="nav-icon">📦</span>
          <span class="nav-text">应用管理</span>
        </button>
        <button class="nav-item" data-page="files">
          <span class="nav-icon">📁</span>
          <span class="nav-text">文件管理</span>
        </button>
        <button class="nav-item" data-page="scrcpy">
          <span class="nav-icon">🖥️</span>
          <span class="nav-text">屏幕投屏</span>
        </button>
        <button class="nav-item" data-page="tools">
          <span class="nav-icon">🔧</span>
          <span class="nav-text">工具箱</span>
        </button>
        <button class="nav-item" data-page="fastboot">
          <span class="nav-icon">⚡</span>
          <span class="nav-text">Fastboot</span>
        </button>
        <button class="nav-item" data-page="settings">
          <span class="nav-icon">⚙️</span>
          <span class="nav-text">设置</span>
        </button>
      </nav>
      
      <div class="sidebar-footer">
        <div class="version">v1.0.0</div>
      </div>
    </aside>

    <main class="main-content">
      <!-- 设备管理页面 -->
      <section id="page-devices" class="page active">
        <header class="page-header">
          <h1>📱 设备管理</h1>
          <button id="btn-refresh-devices" class="btn btn-primary">
            <span>🔄</span> 刷新
          </button>
        </header>
        
        <div class="device-list" id="device-list">
          <div class="empty-state">
            <span class="empty-icon">🔌</span>
            <p>未检测到设备，请连接 Android 设备</p>
          </div>
        </div>

        <div class="device-info" id="device-info" style="display: none;">
          <h2>设备信息</h2>
          <div class="info-grid" id="info-grid"></div>
        </div>
      </section>

      <!-- 应用管理页面 -->
      <section id="page-apps" class="page">
        <header class="page-header">
          <h1>📦 应用管理</h1>
          <div class="header-actions">
            <button id="btn-install-app" class="btn btn-success">
              <span>➕</span> 安装应用
            </button>
            <button id="btn-install-apps" class="btn btn-success">
              <span>📁</span> 批量安装
            </button>
            <button id="btn-batch-uninstall" class="btn btn-danger">
              <span>🗑️</span> 批量卸载
            </button>
            <button id="btn-refresh-apps" class="btn btn-primary">
              <span>🔄</span> 刷新
            </button>
          </div>
        </header>

        <div class="search-bar">
          <input type="text" id="app-search" class="input" placeholder="搜索应用...">
        </div>

        <div class="batch-progress" id="batch-progress" style="display: none;">
          <div class="progress-text" id="batch-progress-text">处理中...</div>
          <div class="progress-bar">
            <div class="progress-fill" id="batch-progress-bar"></div>
          </div>
        </div>

        <div class="apps-grid" id="apps-grid">
          <div class="empty-state">
            <span class="empty-icon">📦</span>
            <p>选择设备后查看应用列表</p>
          </div>
        </div>
      </section>

      <!-- 文件管理页面 -->
      <section id="page-files" class="page">
        <header class="page-header">
          <h1>📁 文件管理</h1>
          <div class="header-actions">
            <button id="btn-upload-file" class="btn btn-primary">
              <span>⬆️</span> 上传文件
            </button>
            <button id="btn-refresh-files" class="btn btn-primary">
              <span>🔄</span> 刷新
            </button>
          </div>
        </header>

        <div class="breadcrumbs" id="breadcrumbs">
          <span>/sdcard</span>
        </div>

        <div class="file-list" id="file-list">
          <div class="empty-state">
            <span class="empty-icon">📁</span>
            <p>选择设备后浏览文件</p>
          </div>
        </div>
      </section>

      <!-- 屏幕投屏页面 -->
      <section id="page-scrcpy" class="page">
        <header class="page-header">
          <h1>🖥️ 屏幕功能</h1>
        </header>

        <div class="scrcpy-controls">
          <h3>投屏设置</h3>
          <div class="control-group">
            <label>帧率</label>
            <select id="scrcpy-fps">
              <option value="30">30 FPS</option>
              <option value="60" selected>60 FPS</option>
              <option value="90">90 FPS</option>
            </select>
          </div>

          <div class="control-group">
            <label>码率</label>
            <select id="scrcpy-bitrate">
              <option value="4">4 Mbps</option>
              <option value="8" selected>8 Mbps</option>
              <option value="16">16 Mbps</option>
            </select>
          </div>

          <div class="control-group">
            <label>分辨率</label>
            <select id="scrcpy-size">
              <option value="720">720p</option>
              <option value="1080" selected>1080p</option>
              <option value="1440">1440p</option>
            </select>
          </div>

          <button id="btn-start-scrcpy" class="btn btn-success btn-large">
            <span>▶️</span> 启动投屏
          </button>

          <button id="btn-stop-scrcpy" class="btn btn-danger btn-large" style="display: none;">
            <span>⏹️</span> 停止投屏
          </button>
        </div>

        <div class="scrcpy-status" id="scrcpy-status">
          <p>选择设备后启动投屏</p>
        </div>

        <div class="screen-settings">
          <h3>屏幕设置</h3>
          <div class="control-group">
            <label>分辨率 (宽 x 高)</label>
            <div class="input-group">
              <input type="number" id="resolution-width" class="input" placeholder="宽" style="width: 80px;">
              <span>x</span>
              <input type="number" id="resolution-height" class="input" placeholder="高" style="width: 80px;">
              <button id="btn-set-resolution" class="btn btn-primary">设置</button>
              <button id="btn-reset-resolution" class="btn btn-secondary">重置</button>
            </div>
          </div>

          <div class="control-group">
            <label>显示密度 (DPI)</label>
            <div class="input-group">
              <input type="number" id="density-value" class="input" placeholder="如: 320">
              <button id="btn-set-density" class="btn btn-primary">设置</button>
              <button id="btn-reset-density" class="btn btn-secondary">重置</button>
            </div>
          </div>
        </div>
      </section>

      <!-- 工具箱页面 -->
      <section id="page-tools" class="page">
        <header class="page-header">
          <h1>🔧 工具箱</h1>
        </header>

        <div class="tools-grid">
          <div class="tool-card" data-tool="screenshot">
            <div class="tool-icon">📸</div>
            <div class="tool-name">截图</div>
            <div class="tool-desc">截取设备屏幕并保存</div>
          </div>

          <div class="tool-card" data-tool="shell">
            <div class="tool-icon">💻</div>
            <div class="tool-name">Shell 命令</div>
            <div class="tool-desc">执行 ADB 命令</div>
          </div>

          <div class="tool-card" data-tool="reboot">
            <div class="tool-icon">🔄</div>
            <div class="tool-name">重启设备</div>
            <div class="tool-desc">重启/进入恢复模式</div>
          </div>
        </div>

        <div id="tool-panel" class="tool-panel" style="display: none;"></div>
      </section>

      <!-- Fastboot 页面 -->
      <section id="page-fastboot" class="page">
        <header class="page-header">
          <h1>⚡ Fastboot 专区</h1>
        </header>

        <div class="fastboot-devices" id="fastboot-devices">
          <button id="btn-scan-fastboot" class="btn btn-primary">
            <span>🔍</span> 扫描 Fastboot 设备
          </button>
        </div>

        <div class="fastboot-actions" id="fastboot-actions" style="display: none;">
          <h3>重启</h3>
          <div class="action-buttons">
            <button class="btn btn-warning" data-action="normal">重启</button>
            <button class="btn btn-warning" data-action="recovery">重启到 Recovery</button>
            <button class="btn btn-warning" data-action="bootloader">重启到 Bootloader</button>
            <button class="btn btn-warning" data-action="fastboot">重启到 Fastboot</button>
          </div>

          <h3>解锁命令</h3>
          <div class="action-buttons">
            <button id="btn-fastboot-unlock" class="btn btn-danger">flashing unlock</button>
            <button id="btn-fastboot-unlock-oem" class="btn btn-danger">oem unlock</button>
            <button id="btn-fastboot-lock" class="btn btn-warning">flashing lock</button>
            <button id="btn-fastboot-lock-oem" class="btn btn-warning">oem lock</button>
          </div>

          <h3>刷入分区</h3>
          <div class="action-buttons">
            <button id="btn-flash-boot" class="btn btn-success" data-partition="boot">刷入 Boot</button>
            <button id="btn-flash-initboot" class="btn btn-success" data-partition="initboot">刷入 Initboot</button>
            <button id="btn-flash-custom" class="btn btn-success" data-partition="custom">自定义分区</button>
          </div>
          <div class="control-group">
            <input type="text" id="custom-partition-name" class="input" placeholder="分区名，如: system">
          </div>

          <h3>命令行</h3>
          <div class="control-group">
            <input type="text" id="fastboot-cmd-input" class="input" placeholder="输入 fastboot 命令，如: devices">
            <button id="btn-run-fastboot-cmd" class="btn btn-primary">执行</button>
          </div>
          <pre id="fastboot-cmd-output" class="cmd-output"></pre>
        </div>
      </section>

      <!-- 设置页面 -->
      <section id="page-settings" class="page">
        <header class="page-header">
          <h1>⚙️ 设置</h1>
        </header>

        <div class="settings-section">
          <h2>关于</h2>
          <p class="app-name">ADB Toolbox</p>
          <p class="app-version">版本 1.0.0</p>
          <p class="app-desc">基于 Electron + scrcpy</p>
        </div>
      </section>
    </main>
  </div>

  <div class="toast-container" id="toast-container"></div>

  <script src="js/app.js"></script>
</body>
</html>
